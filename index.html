<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞—Ä—Ç–∞ –®–ª—è—Ö—É –ö–ª—ñ—î–Ω—Ç–∞ - –í–∑–∞—î–º–æ–¥—ñ—è</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .stage-card { transition: all 0.3s ease; cursor: pointer; }
        .stage-card:hover { transform: translateY(-5px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); }
        .stage-card.active { border-color: #10B981; background-color: #ECFDF5; }
        .content-section { display: none; animation: fadeIn 0.5s; }
        .content-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .chart-container { position: relative; height: 300px; width: 100%; }
        .cj-table-wrapper { overflow-x: auto; -webkit-overflow-scrolling: touch; }
        .cj-table { min-width: 1000px; }
        .cj-table th, .cj-table td { padding: 1rem; border: 1px solid #E2E8F0; text-align: left; vertical-align: top; }
        .cj-table th { background-color: #F8FAFC; font-weight: 600; color: #475569; }
        .cj-table td { background-color: #FFFFFF; color: #334155; }
        .cj-table td:first-child { font-weight: 600; background-color: #F8FAFC; color: #475569; }
    </style>
    
</head>
<body class="bg-slate-50 text-slate-800">

    <header class="bg-white shadow-sm sticky top-0 z-10">
        <div class="max-w-6xl mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <div class="w-8 h-8 bg-emerald-500 rounded-full flex items-center justify-center text-white font-bold">V</div>
                <h1 class="text-xl font-bold text-slate-800">–ö–∞—Ä—Ç–∞ –®–ª—è—Ö—É –ö–ª—ñ—î–Ω—Ç–∞</h1>
            </div>
            <div class="text-sm text-slate-500">–Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ –°—Ç—Ä–∞—Ç–µ–≥—ñ—è</div>
        </div>
    </header>

    <main class="max-w-6xl mx-auto px-4 py-8 space-y-12">

        <section class="text-center max-w-3xl mx-auto">
            <h2 class="text-3xl font-bold text-slate-900 mb-4">–í—ñ–¥ –í—Ç–æ–º–∏ —Ç–∞ –ê–ø–∞—Ç—ñ—ó –¥–æ –†—ñ—à—É—á–æ—Å—Ç—ñ</h2>
            <p class="text-lg text-slate-600">
                –¶—è –∫–∞—Ä—Ç–∞ –ø–æ–∫–∞–∑—É—î, —è–∫ –Ω–∞—à –∫–æ–Ω—Ç–µ–Ω—Ç —É Facebook —Ç–∞ Instagram –≤–µ–¥–µ –∫–ª—ñ—î–Ω—Ç–∞ –∫—Ä—ñ–∑—å –≤–æ—Ä–æ–Ω–∫—É –ø—Ä–∏–π–Ω—è—Ç—Ç—è —Ä—ñ—à–µ–Ω–Ω—è: –≤—ñ–¥ –Ω–µ—É—Å–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º–∏ –¥–æ –∑–∞–ø–∏—Å—É –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—é.
            </p>
        </section>

        <section>
            <h3 class="text-xl font-semibold mb-6 text-slate-700">–ù–∞—Ç–∏—Å–Ω–∏ –Ω–∞ –µ—Ç–∞–ø, —â–æ–± –¥—ñ–∑–Ω–∞—Ç–∏—Å—è –±—ñ–ª—å—à–µ:</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4" id="stagesNav">
                
            </div>
        </section>

        <section id="stageDetail" class="bg-white rounded-2xl shadow-lg p-6 md:p-10 border border-slate-100">
            <div class="text-center text-slate-400 py-10">
                <p>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö –µ—Ç–∞–ø—É...</p>
            </div>
        </section>

        <section class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div class="bg-white p-6 rounded-xl shadow-md border border-slate-100">
                <h3 class="text-lg font-bold mb-4 text-slate-800">–ï–º–æ—Ü—ñ–π–Ω–∞ –î–∏–Ω–∞–º—ñ–∫–∞ –ö–ª—ñ—î–Ω—Ç–∞</h3>
                <p class="text-sm text-slate-500 mb-4">–ó–º—ñ–Ω–∞ —Ä—ñ–≤–Ω—è —Ç—Ä–∏–≤–æ–≥–∏ —Ç–∞ –Ω–∞–¥—ñ—ó –Ω–∞ –∫–æ–∂–Ω–æ–º—É –µ—Ç–∞–ø—ñ.</p>
                <div class="chart-container">
                    <canvas id="emotionChart"></canvas>
                </div>
            </div>

            <div class="bg-white p-6 rounded-xl shadow-md border border-slate-100">
                <h3 class="text-lg font-bold mb-4 text-slate-800">–¢–∏–ø–∏ –ö–æ–Ω—Ç–µ–Ω—Ç—É –∑–∞ –í–ø–ª–∏–≤–æ–º</h3>
                <p class="text-sm text-slate-500 mb-4">–†–æ–∑–ø–æ–¥—ñ–ª —Å—Ç—Ä–∞—Ç–µ–≥—ñ—á–Ω–∏—Ö —Ü—ñ–ª–µ–π –∫–æ–Ω—Ç–µ–Ω—Ç—É.</p>
                <div class="chart-container">
                    <canvas id="contentMixChart"></canvas>
                </div>
            </div>
        </section>

        <section class="bg-white rounded-2xl shadow-lg p-6 md:p-10 border border-slate-100">
            <h3 class="text-2xl font-bold text-slate-900 mb-6">–î–µ—Ç–∞–ª—å–Ω–∞ –º–∞—Ç—Ä–∏—Ü—è —à–ª—è—Ö—É –∫–ª—ñ—î–Ω—Ç–∞</h3>
            <div class="cj-table-wrapper">
                <table class="cj-table w-full border-collapse">
                    <thead>
                        <tr>
                            <th>–ï–ª–µ–º–µ–Ω—Ç</th>
                            
                        </tr>
                    </thead>
                    <tbody>
                        
                    </tbody>
                </table>
            </div>
        </section>

        <section class="bg-emerald-50 rounded-xl p-8 border border-emerald-100">
            <h3 class="text-xl font-bold text-emerald-800 mb-4">–°—Ç—Ä–∞—Ç–µ–≥—ñ—á–Ω—ñ –í–∏—Å–Ω–æ–≤–∫–∏</h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="bg-white p-4 rounded-lg shadow-sm">
                    <div class="text-2xl mb-2">üî¶</div>
                    <h4 class="font-bold text-slate-800">–ï—Ç–∞–ø 1-2: –û—Å–≤—ñ—Ç–∞</h4>
                    <p class="text-sm text-slate-600">–ì–æ–ª–æ–≤–Ω–∞ –º–µ—Ç–∞ ‚Äî "—Å–≤—ñ—Ç–∏—Ç–∏ –ª—ñ—Ö—Ç–∞—Ä–∏–∫–æ–º" —É —Ç–µ–º—Ä—è–≤—ñ –≤—Ç–æ–º–∏ —Ç–∞ –∑–∞–ø–µ—Ä–µ—á–µ–Ω–Ω—è. –ú–∏ –Ω–µ –ø—Ä–æ–¥–∞—î–º–æ, –º–∏ –ø–æ—è—Å–Ω—é—î–º–æ –º–µ—Ö–∞–Ω—ñ–∑–º–∏ (—Å–ø—ñ–≤–∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å, –±–æ—Ä–≥–∏).</p>
                </div>
                <div class="bg-white p-4 rounded-lg shadow-sm">
                    <div class="text-2xl mb-2">ü§ù</div>
                    <h4 class="font-bold text-slate-800">–ï—Ç–∞–ø 3: –î–æ–≤—ñ—Ä–∞</h4>
                    <p class="text-sm text-slate-600">–ö–ª—ñ—î–Ω—Ç —à—É–∫–∞—î —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ç–∞ –±–µ–∑–ø–µ–∫—É. –ö–µ–π—Å–∏ —Ç–∞ –ø–æ—è—Å–Ω–µ–Ω–Ω—è –º–µ—Ç–æ–¥—ñ–≤ (–Ω–µ –∫–æ–¥—É–≤–∞–Ω–Ω—è, –∞ —Ç–µ—Ä–∞–ø—ñ—è) –±—É–¥—É—é—Ç—å –º—ñ—Å—Ç –¥–æ–≤—ñ—Ä–∏.</p>
                </div>
                <div class="bg-white p-4 rounded-lg shadow-sm">
                    <div class="text-2xl mb-2">üöÄ</div>
                    <h4 class="font-bold text-slate-800">–ï—Ç–∞–ø 4: –î—ñ—è</h4>
                    <p class="text-sm text-slate-600">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–µ —Å–ø—Ä–æ—â–µ–Ω–Ω—è. –ö–Ω–æ–ø–∫–∏ "–ù–∞–ø–∏—Å–∞—Ç–∏" (–Ω–µ –¥–∑–≤–æ–Ω–∏—Ç–∏) —Ç–∞ –ª—ñ–¥-–º–∞–≥–Ω—ñ—Ç–∏ –∑–Ω—ñ–º–∞—é—Ç—å —Å—Ç—Ä–∞—Ö –ø–µ—Ä—à–æ–≥–æ –∫–æ–Ω—Ç–∞–∫—Ç—É.</p>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-slate-800 text-slate-300 py-8 mt-12">
        <div class="max-w-6xl mx-auto px-4 text-center">
            <p>&copy; 2025 –ü—Å–∏—Ö–æ–ª–æ–≥—ñ—á–Ω–∞ —Å—Ç—É–¥—ñ—è ¬´–í–∑–∞—î–º–æ–¥—ñ—è¬ª. –°—Ç—Ä–∞—Ç–µ–≥—ñ—è Customer Journey Map.</p>
        </div>
    </footer>

<script>
// --- Data Source from customer_journey_map.md ---
const journeyData = [
    {
        id: 1,
        title: "–ï—Ç–∞–ø 1: –ù–µ—É—Å–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è / –ó–∞–ø–µ—Ä–µ—á–µ–Ω–Ω—è",
        subtitle: "–í—Ç–æ–º–∞/–ê–ø–∞—Ç—ñ—è",
        thought: "–Ø –≤—Ç–æ–º–∏–ª–∞—Å—è, –∞–ª–µ —Ç–∞–∫ –∂–∏–≤—É—Ç—å —É—Å—ñ. –í—ñ–Ω –ø—Ä–æ—Å—Ç–æ –∑–Ω—ñ–º–∞—î —Å—Ç—Ä–µ—Å.",
        action: "–ì–æ—Ä—Ç–∞—î Facebook –≤–≤–µ—á–µ—Ä—ñ, —Å–∫—Ä–æ–ª–∏—Ç—å Instagram, —â–æ–± –≤—ñ–¥–≤–æ–ª—ñ–∫—Ç–∏—Å—è. –ù–µ —à—É–∫–∞—î –ª—ñ–∫—É–≤–∞–Ω–Ω—è.",
        goal: "–ü—Ä–∏–≤–µ—Ä–Ω–µ–Ω–Ω—è —É–≤–∞–≥–∏ —Ç–∞ –ê–∫—Ç–∏–≤–∞—Ü—ñ—è –ø—Ä–æ–±–ª–µ–º–∏.",
        touchpoints: "Facebook/Instagram —Å—Ç—Ä—ñ—á–∫–∞, —Ä–æ–¥–∏—á—ñ, –∫–æ–ª–µ–≥–∏, –Ω–∞—á–∞–ª—å—Å—Ç–≤–æ, YouTube, Telegram",
        content: [
            "¬´–í–∏ –≤—Ç–æ–º–∏–ª–∏—Å—è –π–æ–≥–æ —Ä—è—Ç—É–≤–∞—Ç–∏?¬ª (–¢–µ—Å—Ç –Ω–∞ —Å–ø—ñ–≤–∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å)",
            "¬´–ü–∏–≤–æ –ø–æ –ø'—è—Ç–Ω–∏—Ü—è—Ö: –¥–µ –º–µ–∂–∞?¬ª (–ú'—è–∫–∏–π –≤—Ö—ñ–¥)",
            "¬´–¢—Ä–∏–∫—É—Ç–Ω–∏–∫ –ö–∞—Ä–ø–º–∞–Ω–∞¬ª (–ü—Å–∏—Ö–æ–ª–æ–≥—ñ—á–Ω–∏–π —Ä–æ–∑–±—ñ—Ä)"
        ],
        anxietyLevel: 30, // Low explicit anxiety, high denial
        hopeLevel: 10,
        momentOfTruth: "–ü–æ–±–∞—á–∏—Ç–∏ –ø–æ—Å—Ç, —è–∫–∏–π —Ä–µ–∑–æ–Ω—É—î –∑ –±–æ–ª–µ–º."
    },
    {
        id: 2,
        title: "–ï—Ç–∞–ø 2: –£—Å–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –±–æ–ª—é",
        subtitle: "–¢—Ä–∏–≤–æ–≥–∞/–ë—ñ–ª—å",
        thought: "–ó–¥–∞—î—Ç—å—Å—è, —Ü–µ –Ω–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ. –Ø –±—ñ–ª—å—à–µ –Ω–µ –º–æ–∂—É —Ü–µ —Ç–µ—Ä–ø—ñ—Ç–∏. –ú–µ–Ω—ñ —Å—Ç—Ä–∞—à–Ω–æ.",
        action: "–ü–æ—á–∏–Ω–∞—î —á–∏—Ç–∞—Ç–∏ –ø–æ—Å—Ç–∏ —É–≤–∞–∂–Ω—ñ—à–µ. –ì—É–≥–ª–∏—Ç–∏ —Å–∏–º–ø—Ç–æ–º–∏ —ñ–Ω–∫–æ–≥–Ω—ñ—Ç–æ.",
        goal: "–û—Å–≤—ñ—Ç–∞ —Ç–∞ –ü–æ–∑–∏—Ü—ñ–æ–Ω—É–≤–∞–Ω–Ω—è –µ–∫—Å–ø–µ—Ä—Ç–Ω–æ—Å—Ç—ñ. –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ç–µ–ø–ª–æ–≥–æ –ª—ñ–¥–∞.",
        touchpoints: "Facebook/Instagram —Å—Ç—Ä—ñ—á–∫–∞, Google Search, YouTube (—ñ–Ω–∫–æ–≥–Ω—ñ—Ç–æ), –±–ª–æ–≥ —Å–∞–π—Ç—É",
        content: [
            "¬´–Ü–≥—Ä–æ–º–∞–Ω—ñ—è: —á–æ–º—É –±–æ—Ä–≥–∏ ‚Äî —Ü–µ –ª–∏—à–µ –≤–µ—Ä—Ö—ñ–≤–∫–∞ –∞–π—Å–±–µ—Ä–≥–∞?¬ª",
            "¬´–ß–æ–º—É –∫–æ–¥—É–≤–∞–Ω–Ω—è –Ω–µ –ø—Ä–∞—Ü—é—î?¬ª (–ï–∫—Å–ø–µ—Ä—Ç–Ω—ñ—Å—Ç—å)",
            "¬´–ñ—ñ–Ω–æ—á–∏–π –∞–ª–∫–æ–≥–æ–ª—ñ–∑–º: –º—ñ—Ñ–∏ —Ç–∞ –ø—Ä–∞–≤–¥–∞¬ª (–ó–Ω—è—Ç—Ç—è —Å–æ—Ä–æ–º—É)"
        ],
        anxietyLevel: 90, // Peak anxiety
        hopeLevel: 20,
        momentOfTruth: "–í–∏–∑–Ω–∞–Ω–Ω—è, —â–æ —Ü–µ –Ω–µ –ø—Ä–æ—Å—Ç–æ ¬´–ø–æ–≥–∞–Ω–∞ –∑–≤–∏—á–∫–∞¬ª, –∞ —Ä–µ–∞–ª—å–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞."
    },
    {
        id: 3,
        title: "–ï—Ç–∞–ø 3: –ü–æ—à—É–∫ —Ä—ñ—à–µ–Ω–Ω—è",
        subtitle: "–ù–∞–¥—ñ—è/–î–æ–≤—ñ—Ä–∞",
        thought: "–¢—Ä–µ–±–∞ —â–æ—Å—å —Ä–æ–±–∏—Ç–∏. –ê–ª–µ –∫–æ–º—É –¥–æ–≤—ñ—Ä–∏—Ç–∏—Å—è? –©–æ–± –Ω—ñ—Ö—Ç–æ –Ω–µ –¥—ñ–∑–Ω–∞–≤—Å—è.",
        action: "–ü–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –Ω–∞ —Å–∞–π—Ç, —á–∏—Ç–∞—î –±–ª–æ–≥, –¥–∏–≤–∏—Ç—å—Å—è ¬´–ü—Ä–æ –Ω–∞—Å¬ª. –®—É–∫–∞—î –¥–æ–∫–∞–∑–∏.",
        goal: "–ü–æ–±—É–¥–æ–≤–∞ –¥–æ–≤—ñ—Ä–∏ —Ç–∞ –í–∞–ª—ñ–¥–∞—Ü—ñ—è –≤–∏–±–æ—Ä—É. –¶—ñ–ª—å –ü—Ä–æ–¥–∞–∂—ñ–≤: –ü—Ä–æ–¥–∞—Ç–∏ —Ü—ñ–Ω–Ω—ñ—Å—Ç—å –ø–æ—Å–ª—É–≥–∏, —è–∫–∞ –≤–∏–ø—Ä–∞–≤–¥–æ–≤—É—î —Ü—ñ–Ω—É.",
        touchpoints: "–°–∞–π—Ç (–±–ª–æ–≥, —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –ø–æ—Å–ª—É–≥), –≤—ñ–¥–≥—É–∫–∏, Instagram (–ø–æ—à—É–∫ –µ–∫—Å–ø–µ—Ä—Ç—ñ–≤)",
        content: [
            "–ö–µ–π—Å–∏: ¬´–Ø–∫ –º–∏ –¥–æ–ø–æ–º–æ–≥–ª–∏ –ü–µ—Ç—Ä—É –≤–∏–π—Ç–∏ –∑ –≥—Ä–∏¬ª",
            "–ü–æ—Å—Ç–∏ –ø—Ä–æ –º–µ—Ç–æ–¥–∏: ¬´–Ø–∫ –ø—Ä–∞—Ü—é—î –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø—ñ—è¬ª",
            "–í—ñ–¥–≥—É–∫–∏ (–°–∫—Ä—ñ–Ω—à–æ—Ç–∏): –†–µ–∞–ª—å–Ω—ñ —Å–ª–æ–≤–∞ –≤–¥—è—á–Ω–æ—Å—Ç—ñ"
        ],
        anxietyLevel: 60, // Anxiety drops, hope rises
        hopeLevel: 70,
        momentOfTruth: "–ó–Ω–∞—Ö—ñ–¥–∫–∞ –µ–∫—Å–ø–µ—Ä—Ç–∞ - –ø—Ä–æ—Ñ–µ—Å—ñ–æ–Ω–∞–ª–∞, —è–∫–∏–π —Ä–æ–∑—É–º—ñ—î –ø—Ä–æ–±–ª–µ–º—É —ñ –≥–∞—Ä–∞–Ω—Ç—É—î –∞–Ω–æ–Ω—ñ–º–Ω—ñ—Å—Ç—å."
    },
    {
        id: 4,
        title: "–ï—Ç–∞–ø 4: –î—ñ—è",
        subtitle: "–†—ñ—à—É—á—ñ—Å—Ç—å",
        thought: "–Ø –≥–æ—Ç–æ–≤–∞ —Å–ø—Ä–æ–±—É–≤–∞—Ç–∏. –ì—ñ—Ä—à–µ –≤–∂–µ –Ω–µ –±—É–¥–µ.",
        action: "–®—É–∫–∞—î –∫–Ω–æ–ø–∫—É, –ø–∏—à–µ –≤ –º–µ—Å–µ–Ω–¥–∂–µ—Ä –∞–±–æ –¥–∑–≤–æ–Ω–∏—Ç—å.",
        goal: "–ö–æ–Ω–≤–µ—Ä—Å—ñ—è —Ç–∞ –ó–Ω—è—Ç—Ç—è –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ –±–∞—Ä'—î—Ä—É. –¶—ñ–ª—å –ü—Ä–æ–¥–∞–∂—ñ–≤: –ö–≤–∞–ª—ñ—Ñ—ñ–∫–∞—Ü—ñ—è –ª—ñ–¥–∞ —Ç–∞ –£—Å—É–Ω–µ–Ω–Ω—è –∑–∞–ø–µ—Ä–µ—á–µ–Ω—å. –ó–∞–∫—Ä–∏—Ç—Ç—è —É–≥–æ–¥–∏ (–ü–µ—Ä—à–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—è)",
        touchpoints: "–§–æ—Ä–º–∞ –Ω–∞ —Å–∞–π—Ç—ñ, –º–µ—Å–µ–Ω–¥–∂–µ—Ä–∏ (WhatsApp, Viber, Telegram), —Ç–µ–ª–µ—Ñ–æ–Ω–Ω–∏–π –¥–∑–≤—ñ–Ω–æ–∫",
        content: [
            "–ü—Ä—è–º–∞ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—è: ¬´–ü–æ–≤–µ—Ä–Ω—ñ—Ç—å —Å–æ–±—ñ –∂–∏—Ç—Ç—è¬ª",
            "–õ—ñ–¥-–º–∞–≥–Ω—ñ—Ç: –ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏–π —Ç–µ—Å—Ç -> –ó–∞—è–≤–∫–∞",
            "–ö–Ω–æ–ø–∫–∞: ¬´–ù–∞–ø–∏—Å–∞—Ç–∏ –≤ Telegram /WhatsApp¬ª (–ë–µ–∑ –¥–∑–≤—ñ–Ω–∫–∞)"
        ],
        anxietyLevel: 40, // Action taken, still some anxiety
        hopeLevel: 95,
        momentOfTruth: "–ü–µ—Ä—à–∏–π –∫–æ–Ω—Ç–∞–∫—Ç, –≤—ñ–¥—á—É—Ç—Ç—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ —Ç–∞ —Ä–æ–∑—É–º—ñ–Ω–Ω—è. –ó–∞–ø–∏—Å!"
    }
];

// --- App State ---
let currentStageId = 1;

// --- Render Functions ---

function renderNavigation() {
    const navContainer = document.getElementById('stagesNav');
    navContainer.innerHTML = journeyData.map(stage => `
        <div onclick="switchStage(${stage.id})" 
             class="stage-card p-4 rounded-xl border-2 ${stage.id === currentStageId ? 'border-emerald-500 bg-emerald-50' : 'border-slate-200 bg-white'}">
            <div class="text-xs font-bold uppercase tracking-wider mb-1 ${stage.id === currentStageId ? 'text-emerald-600' : 'text-slate-400'}">
                –ö—Ä–æ–∫ ${stage.id}
            </div>
            <div class="font-bold text-slate-800 leading-tight">${stage.subtitle}</div>
        </div>
    `).join('');
}

function renderDetail() {
    const stage = journeyData.find(s => s.id === currentStageId);
    const container = document.getElementById('stageDetail');
    
    const contentList = stage.content.map(item => 
        `<li class="flex items-start space-x-2">
            <span class="text-emerald-500 mt-1">‚óè</span>
            <span>${item}</span>
        </li>`
    ).join('');

    container.innerHTML = `
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 animation-fade-in">
            <div>
                <h2 class="text-2xl font-bold text-slate-800 mb-2">${stage.title}</h2>
                <div class="inline-block px-3 py-1 bg-slate-100 text-slate-600 rounded-full text-sm font-semibold mb-6">
                    –ï–º–æ—Ü—ñ—è: "${stage.subtitle}"
                </div>
                
                <div class="space-y-6">
                    <div class="bg-white border-l-4 border-emerald-400 pl-4 py-1">
                        <h4 class="text-sm font-bold text-slate-400 uppercase tracking-wide">–©–æ –¥—É–º–∞—î</h4>
                        <p class="text-slate-700 text-lg">${stage.thought}</p>
                    </div>
                    <div class="bg-white border-l-4 border-blue-400 pl-4 py-1">
                        <h4 class="text-sm font-bold text-slate-400 uppercase tracking-wide">–©–æ —Ä–æ–±–∏—Ç—å</h4>
                        <p class="text-slate-700 text-lg">${stage.action}</p>
                    </div>
                    <div class="bg-white border-l-4 border-purple-400 pl-4 py-1">
                        <h4 class="text-sm font-bold text-slate-400 uppercase tracking-wide">–ù–∞—à–∞ –¶—ñ–ª—å (–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥)</h4>
                        <p class="text-slate-700 text-lg">${stage.goal}</p>
                    </div>
                </div>
            </div>
            
            <div class="bg-slate-50 rounded-xl p-6 border border-slate-100">
                <h3 class="text-lg font-bold text-slate-800 mb-4 flex items-center">
                    <span class="text-2xl mr-2">üì±</span> –ö–æ–Ω—Ç–µ–Ω—Ç-–°—Ç—Ä–∞—Ç–µ–≥—ñ—è
                </h3>
                <ul class="space-y-3 text-slate-600">
                    ${contentList}
                </ul>
                <div class="mt-6 pt-6 border-t border-slate-200">
                    <div class="flex justify-between text-sm mb-1">
                        <span class="text-slate-500">–†—ñ–≤–µ–Ω—å —Ç—Ä–∏–≤–æ–≥–∏</span>
                        <span class="font-bold text-rose-500">${stage.anxietyLevel}%</span>
                    </div>
                    <div class="w-full bg-slate-200 rounded-full h-2 mb-4">
                        <div class="bg-rose-500 h-2 rounded-full" style="width: ${stage.anxietyLevel}%"></div>
                    </div>
                    
                    <div class="flex justify-between text-sm mb-1">
                        <span class="text-slate-500">–†—ñ–≤–µ–Ω—å –Ω–∞–¥—ñ—ó</span>
                        <span class="font-bold text-emerald-500">${stage.hopeLevel}%</span>
                    </div>
                    <div class="w-full bg-slate-200 rounded-full h-2">
                        <div class="bg-emerald-500 h-2 rounded-full" style="width: ${stage.hopeLevel}%"></div>
                    </div>
                </div>
            </div>
        </div>
    `;
}

function renderMatrixTable() {
    const table = document.querySelector('.cj-table');
    const tableHead = table.querySelector('thead tr');
    const tableBody = table.querySelector('tbody');

    tableHead.innerHTML = '<th>–ï–ª–µ–º–µ–Ω—Ç</th>';
    tableBody.innerHTML = '';

    journeyData.forEach(stage => {
        const th = document.createElement('th');
        th.textContent = `${stage.subtitle}`;
        tableHead.appendChild(th);
    });

    const rowsData = [
        { header: "–©–æ –¥—É–º–∞—î?", key: "thought" },
        { header: "–©–æ —Ä–æ–±–∏—Ç—å?", key: "action" },
        { header: "Touch points", key: "touchpoints" },
        { header: "–ö–æ–Ω—Ç–µ–Ω—Ç-—Å—Ç—Ä–∞—Ç–µ–≥—ñ—è", key: "content", format: (items) => items.map(item => `<li>${item}</li>`).join('') },
        { header: "–ö—Ä–∏–≤–∞ –¥–æ—Å–≤—ñ–¥—É (–µ–º–æ—Ü—ñ—ó)", key: "emotionalCurve", format: (stage) => {
            const status = (stage.anxietyLevel > 70) ? 'üî¥ –í–∏—Å–æ–∫–∞ —Ç—Ä–∏–≤–æ–≥–∞' : 
                           (stage.hopeLevel > 70) ? 'üü¢ –í–∏—Å–æ–∫–∞ –Ω–∞–¥—ñ—è' : 
                           'üü° –ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ / –í –ø–æ—à—É–∫—É';
            return `–¢—Ä–∏–≤–æ–≥–∞: ${stage.anxietyLevel}%<br>–ù–∞–¥—ñ—è: ${stage.hopeLevel}%<br>–°—Ç–∞–Ω: ${status}`;
        }},
        { header: "–ú–æ–º–µ–Ω—Ç–∏ —ñ—Å—Ç–∏–Ω–∏", key: "momentOfTruth" }
    ];

    rowsData.forEach(rowData => {
        const tr = document.createElement('tr');
        const th = document.createElement('td');
        th.textContent = rowData.header;
        tr.appendChild(th);

        journeyData.forEach(stage => {
            const td = document.createElement('td');
            let cellContent = stage[rowData.key];
            
            if (rowData.format) {
                cellContent = rowData.format(stage[rowData.key] || stage);
            } else if (Array.isArray(cellContent)) {
                cellContent = cellContent.map(item => `<li>${item}</li>`).join('');
            }
            
            td.innerHTML = cellContent;
            tr.appendChild(td);
        });
        tableBody.appendChild(tr);
    });
}


window.switchStage = function(id) {
    currentStageId = id;
    renderNavigation();
    renderDetail();
};

// --- Charts Initialization ---
function initCharts() {
    const ctxEmotion = document.getElementById('emotionChart').getContext('2d');
    new Chart(ctxEmotion, {
        type: 'line',
        data: {
            labels: journeyData.map(s => `–ï—Ç–∞–ø ${s.id}`),
            datasets: [
                {
                    label: '–¢—Ä–∏–≤–æ–≥–∞ / –ë—ñ–ª—å',
                    data: journeyData.map(s => s.anxietyLevel),
                    borderColor: '#F43F5E',
                    backgroundColor: 'rgba(244, 63, 94, 0.1)',
                    tension: 0.4,
                    fill: true
                },
                {
                    label: '–ù–∞–¥—ñ—è / –î–æ–≤—ñ—Ä–∞',
                    data: journeyData.map(s => s.hopeLevel),
                    borderColor: '#10B981',
                    backgroundColor: 'rgba(16, 185, 129, 0.1)',
                    tension: 0.4,
                    fill: true
                }
            ]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                tooltip: {
                    callbacks: {
                        title: function(tooltipItems) {
                            const item = tooltipItems[0];
                            let label = item.chart.data.labels[item.dataIndex];
                            return Array.isArray(label) ? label.join(' ') : label;
                        }
                    }
                },
                legend: { position: 'bottom' }
            },
            scales: {
                y: { beginAtZero: true, max: 100 }
            }
        }
    });

    const ctxContent = document.getElementById('contentMixChart').getContext('2d');
    new Chart(ctxContent, {
        type: 'doughnut',
        data: {
            labels: ['–û—Å–≤—ñ—Ç–Ω—ñ–π / –ï–∫—Å–ø–µ—Ä—Ç–Ω–∏–π', '–ï–º–æ—Ü—ñ–π–Ω–∏–π / –ü—ñ–¥—Ç—Ä–∏–º–∫–∞', '–°–æ—Ü—ñ–∞–ª—å–Ω—ñ –î–æ–∫–∞–∑–∏ (–ö–µ–π—Å–∏)', '–ü—Ä–æ–¥–∞—é—á–∏–π (CTA)'],
            datasets: [{
                data: [40, 30, 20, 10],
                backgroundColor: [
                    '#3B82F6',
                    '#F59E0B',
                    '#10B981',
                    '#6366F1' 
                ],
                borderWidth: 0
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                 tooltip: {
                    callbacks: {
                        title: function(tooltipItems) {
                            const item = tooltipItems[0];
                            let label = item.chart.data.labels[item.dataIndex];
                            return Array.isArray(label) ? label.join(' ') : label;
                        }
                    }
                },
                legend: { position: 'right' }
            }
        }
    });
}

// --- Init ---
document.addEventListener('DOMContentLoaded', () => {
    renderNavigation();
    renderDetail();
    initCharts();
    renderMatrixTable();
});

</script>
</body>
</html>
